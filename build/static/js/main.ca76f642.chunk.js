(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),c=t.n(a),r=t(5),o=t(3),s=t(4),u=t.n(s),i=t(2),l="/api/persons",j=function(e){return u.a.post(l,e)},d=function(e){return u.a.delete("".concat(l,"/").concat(e))},b=function(e,n){return u.a.put("".concat(l,"/").concat(n),e)},h=t(0),m=function(e){var n=e.personToShow,t=e.setPersons;return Object(h.jsx)("div",{children:n.map((function(e){return Object(h.jsxs)("div",{children:[e.name," ",e.number," ",Object(h.jsx)("button",{onClick:function(){return a=e,void(window.confirm("Delete ".concat(a.name," ?"))&&d(a.id).then(t(n.filter((function(e){return e.id!==a.id})))));var a},children:"delete"}),Object(h.jsx)("p",{})]},e.name)}))})},f=function(e){var n=e.nameMessage,t=e.numberMessage,a=e.errorMessage;return null===n&&null===t?null:null===n&&null!=t?null!=a?null:Object(h.jsx)("div",{className:"info",children:t}):null!=n&&null===t?Object(h.jsx)("div",{className:"info",children:n}):Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"info",children:t}),Object(h.jsx)("div",{className:"info",children:n})]})},O=function(e){var n=e.errorMessage;return null===n?null:Object(h.jsx)("div",{className:"error",children:n})},v=function(e){var n=e.addPerson,t=e.newName,a=e.newNumber,c=e.handleNumberChange,r=e.handlePersonChange;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:["Name: ",Object(h.jsx)("input",{value:t,onChange:r})]}),Object(h.jsx)("p",{}),Object(h.jsxs)("div",{children:["Number: ",Object(h.jsx)("input",{value:a,onChange:c})]}),Object(h.jsx)("p",{}),Object(h.jsx)("button",{type:"submit",children:"add"})]})},x=function(e){var n=e.newSearch,t=e.handleNewSearch;return Object(h.jsxs)("div",{children:["filter shown with ",Object(h.jsx)("input",{value:n,onChange:t})]})},g=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(i.useState)(""),s=Object(o.a)(c,2),l=s[0],d=s[1],g=Object(i.useState)(""),p=Object(o.a)(g,2),w=p[0],N=p[1],S=Object(i.useState)(""),C=Object(o.a)(S,2),M=C[0],P=C[1],T=Object(i.useState)(null),k=Object(o.a)(T,2),L=k[0],y=k[1],E=Object(i.useState)(null),A=Object(o.a)(E,2),D=A[0],I=A[1],J=Object(i.useState)(null),B=Object(o.a)(J,2),q=B[0],z=B[1];Object(i.useEffect)((function(){u.a.get("/api/persons").then((function(e){console.log(e.data),a(e.data)}))}),[]);var F=""===M?t:t.filter((function(e){return e.name.toLowerCase().includes(M.toLowerCase())}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{errorMessage:q}),Object(h.jsx)(f,{nameMessage:L,numberMessage:D,errorMessage:q}),Object(h.jsx)(x,{newSearch:M,handleNewSearch:function(e){console.log(e.target.value),P(e.target.value)}}),Object(h.jsx)("h3",{children:"Add a new"}),Object(h.jsx)(v,{addPerson:function(e){var n=!1,c=0,o="";e.preventDefault();var s={name:l,number:w};t.forEach((function(e){e.name.toLowerCase()===l.toLocaleLowerCase()&&(n=!0,c=e.id,o=e.name)})),n?window.confirm("".concat(o," is already added to phonebook, replace the old number with a new one ?"))&&(b(Object(r.a)(Object(r.a)({},s),{},{name:o}),c).then((function(e){a(t.map((function(n){return n.id!==c?n:Object(r.a)(Object(r.a)({},e.data),{},{name:o})})))})).catch((function(e){z("Information of ".concat(o," has already been removed from server")),a(t.filter((function(e){return e.id!==c}))),setTimeout((function(){z(null)}),5e3),d(""),N("")})),I("".concat(o,"'s number has been changed")),setTimeout((function(){I(null)}),5e3),d(""),N("")):(j(s).then((function(e){a(t.concat(e.data)),y("Added ".concat(l)),setTimeout((function(){y(null)}),5e3)})).catch((function(e){z("".concat(e.message," name must > 3 and number must > 8")),setTimeout((function(){z(null)}),5e3)})),d(""),N(""))},newName:l,newNumber:w,handleNumberChange:function(e){console.log(e.target.value),N(e.target.value)},handlePersonChange:function(e){console.log(e.target.value),d(e.target.value)}}),Object(h.jsx)("h3",{children:"Numbers"}),Object(h.jsx)(m,{personToShow:F,setPersons:a})]})};t(39);c.a.render(Object(h.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ca76f642.chunk.js.map